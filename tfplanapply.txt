random_password.resource: Refreshing state... [id=none]
random_string.numbers: Refreshing state... [id=3461]
module.vnet-static-ddos-attack.data.azurerm_resources.AssetsData: Reading...
module.vnet-static-ddos-attack.data.azurerm_resources.AssetsData: Read complete after 0s [id=resource-a76ff7ae-24d0-47c4-a486-49f08d1c1e0d]
module.sa-static-availability.data.azurerm_resources.AssetsData: Reading...
module.sa-static-availability.data.azurerm_resources.AssetsData: Read complete after 0s [id=resource-39135bbe-6bb7-4f52-8b6a-9e0c0e6339dd]
module.pip-static-packets-in-ddos.data.azurerm_resources.AssetsData: Reading...
module.pip-static-packets-in-ddos.data.azurerm_resources.AssetsData: Read complete after 0s [id=resource-1ebb437c-9ef7-4a5d-92e9-c862cd6dfa22]
module.pip-static-ddos-attack.data.azurerm_resources.AssetsData: Reading...
module.afw-static-firewall-health.data.azurerm_resources.AssetsData: Reading...
module.pip-static-ddos-attack.data.azurerm_resources.AssetsData: Read complete after 0s [id=resource-3e0a9661-61b6-4d7a-9d43-55d096a6b5d9]
module.afw-static-firewall-health.data.azurerm_resources.AssetsData: Read complete after 0s [id=resource-5e5f5ff4-8308-48b5-be38-a7a8846c675f]
azurerm_resource_group.security: Refreshing state... [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-security]
azurerm_resource_group.networking: Refreshing state... [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-networking]
azurerm_monitor_action_group.ag_itsm: Refreshing state... [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-monitoring/providers/Microsoft.Insights/actionGroups/action-group-itsm-mailbox]
azurerm_firewall_policy.firewall_policy: Refreshing state... [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-security/providers/Microsoft.Network/firewallPolicies/fw-gbl-test-firewallpolicy]
azurerm_public_ip.firewall_pubip: Refreshing state... [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-security/providers/Microsoft.Network/publicIPAddresses/pubip-uks-test-firewall-1]
azurerm_storage_account.diagnostics: Refreshing state... [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-storage/providers/Microsoft.Storage/storageAccounts/saukstestdiag01]
azurerm_network_security_group.nsg_1: Refreshing state... [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-networking/providers/Microsoft.Network/networkSecurityGroups/nsg-uks-test-virtualmachine_1-1]
azurerm_resource_group.compute: Refreshing state... [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-compute]
azurerm_network_ddos_protection_plan.ddos_std: Refreshing state... [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-security/providers/Microsoft.Network/ddosProtectionPlans/ddos-protection-plan]
azurerm_resource_group.storage: Refreshing state... [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-storage]
azurerm_monitor_action_group.ag_oncall: Refreshing state... [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-monitoring/providers/Microsoft.Insights/actionGroups/action-group-oncall-mailbox]
azurerm_monitor_action_group.ag_proj: Refreshing state... [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-monitoring/providers/Microsoft.Insights/actionGroups/action-group-oncall-mailbox]
data.azurerm_subscription.current: Reading...
module.vm-custom-subscription-os-disk-read-latency-alert.data.azurerm_resources.AssetsData: Reading...
azurerm_resource_group.monitoring: Refreshing state... [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-monitoring]
azurerm_virtual_network.vnet: Refreshing state... [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-networking/providers/Microsoft.Network/virtualNetworks/vnet-uks-main]
module.vm-custom-subscription-os-disk-read-latency-alert.data.azurerm_resources.AssetsData: Read complete after 0s [id=resource-47cfcb8f-1d8b-44b8-81fa-ecc92d0f20ad]
data.azurerm_subscription.current: Read complete after 0s [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f]
module.afw-static-snat-port-utilization.data.azurerm_resources.AssetsData: Reading...
module.pip-static-bytes-in-ddos-attack.data.azurerm_resources.AssetsData: Reading...
azurerm_subnet.networking: Refreshing state... [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-networking/providers/Microsoft.Network/virtualNetworks/vnet-uks-main/subnets/snet-uks-network]
azurerm_subnet.firewall: Refreshing state... [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-networking/providers/Microsoft.Network/virtualNetworks/vnet-uks-main/subnets/AzureFirewallSubnet]
azurerm_subnet.security: Refreshing state... [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-networking/providers/Microsoft.Network/virtualNetworks/vnet-uks-main/subnets/snet-uks-security]
azurerm_subnet.storage: Refreshing state... [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-networking/providers/Microsoft.Network/virtualNetworks/vnet-uks-main/subnets/snet-uks-storage]
azurerm_subnet.compute: Refreshing state... [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-networking/providers/Microsoft.Network/virtualNetworks/vnet-uks-main/subnets/snet-uks-compute]
module.afw-static-snat-port-utilization.data.azurerm_resources.AssetsData: Read complete after 0s [id=resource-57736894-e963-4fd2-b7a9-a42ae8b88528]
module.pip-static-bytes-in-ddos-attack.data.azurerm_resources.AssetsData: Read complete after 0s [id=resource-ed0d1b83-10fd-481a-bc6f-1fb82ab14306]
azurerm_network_interface.vm_nic: Refreshing state... [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-compute/providers/Microsoft.Network/networkInterfaces/nic-uks-test-virtualmachine_1-1]
azurerm_network_interface_security_group_association.nsg1_vm1: Refreshing state... [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-compute/providers/Microsoft.Network/networkInterfaces/nic-uks-test-virtualmachine_1-1|/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-networking/providers/Microsoft.Network/networkSecurityGroups/nsg-uks-test-virtualmachine_1-1]

Note: Objects have changed outside of Terraform

Terraform detected the following changes made outside of Terraform since the
last "terraform apply" which may have affected this plan:

  # azurerm_firewall_policy.firewall_policy has been deleted
  - resource "azurerm_firewall_policy" "firewall_policy" {
      - id                                = "/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-security/providers/Microsoft.Network/firewallPolicies/fw-gbl-test-firewallpolicy" -> null
        name                              = "fw-gbl-test-firewallpolicy"
        tags                              = {}
        # (9 unchanged attributes hidden)
    }

  # azurerm_network_ddos_protection_plan.ddos_std has been deleted
  - resource "azurerm_network_ddos_protection_plan" "ddos_std" {
      - id                  = "/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-security/providers/Microsoft.Network/ddosProtectionPlans/ddos-protection-plan" -> null
        name                = "ddos-protection-plan"
        tags                = {}
        # (3 unchanged attributes hidden)
    }

  # azurerm_network_interface.vm_nic has been deleted
  - resource "azurerm_network_interface" "vm_nic" {
      - id                             = "/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-compute/providers/Microsoft.Network/networkInterfaces/nic-uks-test-virtualmachine_1-1" -> null
        name                           = "nic-uks-test-virtualmachine_1-1"
        tags                           = {}
        # (11 unchanged attributes hidden)

        # (1 unchanged block hidden)
    }

  # azurerm_network_security_group.nsg_1 has been deleted
  - resource "azurerm_network_security_group" "nsg_1" {
      - id                  = "/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-networking/providers/Microsoft.Network/networkSecurityGroups/nsg-uks-test-virtualmachine_1-1" -> null
        name                = "nsg-uks-test-virtualmachine_1-1"
        tags                = {}
        # (3 unchanged attributes hidden)
    }

  # azurerm_public_ip.firewall_pubip has been deleted
  - resource "azurerm_public_ip" "firewall_pubip" {
      - id                      = "/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-security/providers/Microsoft.Network/publicIPAddresses/pubip-uks-test-firewall-1" -> null
        name                    = "pubip-uks-test-firewall-1"
        tags                    = {}
        # (11 unchanged attributes hidden)
    }

  # azurerm_storage_account.diagnostics has been deleted
  - resource "azurerm_storage_account" "diagnostics" {
        id                                = "/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-storage/providers/Microsoft.Storage/storageAccounts/saukstestdiag01"
        name                              = "saukstestdiag01"
      - primary_blob_endpoint             = "https://saukstestdiag01.blob.core.windows.net/" -> null
        tags                              = {}
        # (38 unchanged attributes hidden)

        # (4 unchanged blocks hidden)
    }

  # azurerm_subnet.compute has been deleted
  - resource "azurerm_subnet" "compute" {
      - id                                             = "/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-networking/providers/Microsoft.Network/virtualNetworks/vnet-uks-main/subnets/snet-uks-compute" -> null
        name                                           = "snet-uks-compute"
        # (11 unchanged attributes hidden)
    }

  # azurerm_subnet.firewall has been deleted
  - resource "azurerm_subnet" "firewall" {
      - id                                             = "/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-networking/providers/Microsoft.Network/virtualNetworks/vnet-uks-main/subnets/AzureFirewallSubnet" -> null
        name                                           = "AzureFirewallSubnet"
        # (11 unchanged attributes hidden)
    }

  # azurerm_virtual_network.vnet has been deleted
  - resource "azurerm_virtual_network" "vnet" {
        id                      = "/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-networking/providers/Microsoft.Network/virtualNetworks/vnet-uks-main"
      - name                    = "vnet-uks-main" -> null
        tags                    = {}
        # (7 unchanged attributes hidden)

        # (1 unchanged block hidden)
    }


Unless you have made equivalent changes to your configuration, or ignored the
relevant attributes using ignore_changes, the following plan may include
actions to undo or respond to these changes.

─────────────────────────────────────────────────────────────────────────────

Terraform used the selected providers to generate the following execution
plan. Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # azurerm_firewall.firewall will be created
  + resource "azurerm_firewall" "firewall" {
      + dns_proxy_enabled   = (known after apply)
      + firewall_policy_id  = (known after apply)
      + id                  = (known after apply)
      + location            = "uksouth"
      + name                = "fw-gbl-test-firewall"
      + resource_group_name = "rg-uks-networking"
      + sku_name            = "AZFW_VNet"
      + sku_tier            = "Standard"
      + threat_intel_mode   = "Alert"

      + ip_configuration {
          + name                 = "configuration"
          + private_ip_address   = (known after apply)
          + public_ip_address_id = (known after apply)
          + subnet_id            = (known after apply)
        }
    }

  # azurerm_firewall_policy.firewall_policy will be created
  + resource "azurerm_firewall_policy" "firewall_policy" {
      + child_policies           = (known after apply)
      + firewalls                = (known after apply)
      + id                       = (known after apply)
      + location                 = "uksouth"
      + name                     = "fw-gbl-test-firewallpolicy"
      + resource_group_name      = "rg-uks-networking"
      + rule_collection_groups   = (known after apply)
      + sku                      = (known after apply)
      + threat_intelligence_mode = "Alert"
    }

  # azurerm_monitor_action_group.ag_itsm will be created
  + resource "azurerm_monitor_action_group" "ag_itsm" {
      + enabled             = true
      + id                  = (known after apply)
      + location            = "global"
      + name                = "action-group-itsm-mailbox"
      + resource_group_name = "rg-uks-monitoring"
      + short_name          = "ag-itsm"

      + email_receiver {
          + email_address = "itsm-mailbox@yourdomain.com"
          + name          = "itsm-group"
        }
    }

  # azurerm_monitor_action_group.ag_oncall will be created
  + resource "azurerm_monitor_action_group" "ag_oncall" {
      + enabled             = true
      + id                  = (known after apply)
      + location            = "global"
      + name                = "action-group-oncall-mailbox"
      + resource_group_name = "rg-uks-monitoring"
      + short_name          = "ag-oncall"

      + email_receiver {
          + email_address = "oncall-mailbox@yourdomain.com"
          + name          = "oncall-group"
        }
    }

  # azurerm_monitor_action_group.ag_proj will be created
  + resource "azurerm_monitor_action_group" "ag_proj" {
      + enabled             = true
      + id                  = (known after apply)
      + location            = "global"
      + name                = "action-group-oncall-mailbox"
      + resource_group_name = "rg-uks-monitoring"
      + short_name          = "ag-project"

      + email_receiver {
          + email_address = "project-mailbox@yourdomain.com"
          + name          = "project-group"
        }
    }

  # azurerm_network_ddos_protection_plan.ddos_std will be created
  + resource "azurerm_network_ddos_protection_plan" "ddos_std" {
      + id                  = (known after apply)
      + location            = "uksouth"
      + name                = "ddos-protection-plan"
      + resource_group_name = "rg-uks-security"
      + virtual_network_ids = (known after apply)
    }

  # azurerm_network_interface.vm_nic will be created
  + resource "azurerm_network_interface" "vm_nic" {
      + accelerated_networking_enabled = (known after apply)
      + applied_dns_servers            = (known after apply)
      + dns_servers                    = (known after apply)
      + enable_accelerated_networking  = (known after apply)
      + enable_ip_forwarding           = (known after apply)
      + id                             = (known after apply)
      + internal_domain_name_suffix    = (known after apply)
      + ip_forwarding_enabled          = (known after apply)
      + location                       = "uksouth"
      + mac_address                    = (known after apply)
      + name                           = "nic-uks-test-virtualmachine_1-1"
      + private_ip_address             = (known after apply)
      + private_ip_addresses           = (known after apply)
      + resource_group_name            = "rg-uks-compute"
      + virtual_machine_id             = (known after apply)

      + ip_configuration {
          + gateway_load_balancer_frontend_ip_configuration_id = (known after apply)
          + name                                               = "internal"
          + primary                                            = (known after apply)
          + private_ip_address                                 = (known after apply)
          + private_ip_address_allocation                      = "Dynamic"
          + private_ip_address_version                         = "IPv4"
          + subnet_id                                          = (known after apply)
        }
    }

  # azurerm_network_interface_security_group_association.nsg1_vm1 will be created
  + resource "azurerm_network_interface_security_group_association" "nsg1_vm1" {
      + id                        = (known after apply)
      + network_interface_id      = (known after apply)
      + network_security_group_id = (known after apply)
    }

  # azurerm_network_security_group.nsg_1 will be created
  + resource "azurerm_network_security_group" "nsg_1" {
      + id                  = (known after apply)
      + location            = "uksouth"
      + name                = "nsg-uks-test-virtualmachine_1-1"
      + resource_group_name = "rg-uks-networking"
      + security_rule       = (known after apply)
    }

  # azurerm_public_ip.firewall_pubip will be created
  + resource "azurerm_public_ip" "firewall_pubip" {
      + allocation_method       = "Static"
      + ddos_protection_mode    = "VirtualNetworkInherited"
      + fqdn                    = (known after apply)
      + id                      = (known after apply)
      + idle_timeout_in_minutes = 4
      + ip_address              = (known after apply)
      + ip_version              = "IPv4"
      + location                = "uksouth"
      + name                    = "pubip-uks-test-firewall-1"
      + resource_group_name     = "rg-uks-networking"
      + sku                     = "Standard"
      + sku_tier                = "Regional"
    }

  # azurerm_storage_account.diagnostics will be created
  + resource "azurerm_storage_account" "diagnostics" {
      + access_tier                        = (known after apply)
      + account_kind                       = "StorageV2"
      + account_replication_type           = "LRS"
      + account_tier                       = "Standard"
      + allow_nested_items_to_be_public    = true
      + cross_tenant_replication_enabled   = true
      + default_to_oauth_authentication    = false
      + dns_endpoint_type                  = "Standard"
      + enable_https_traffic_only          = true
      + id                                 = (known after apply)
      + infrastructure_encryption_enabled  = false
      + is_hns_enabled                     = false
      + large_file_share_enabled           = (known after apply)
      + local_user_enabled                 = true
      + location                           = "uksouth"
      + min_tls_version                    = "TLS1_2"
      + name                               = "saukstestdiag01"
      + nfsv3_enabled                      = false
      + primary_access_key                 = (sensitive value)
      + primary_blob_connection_string     = (sensitive value)
      + primary_blob_endpoint              = (known after apply)
      + primary_blob_host                  = (known after apply)
      + primary_blob_internet_endpoint     = (known after apply)
      + primary_blob_internet_host         = (known after apply)
      + primary_blob_microsoft_endpoint    = (known after apply)
      + primary_blob_microsoft_host        = (known after apply)
      + primary_connection_string          = (sensitive value)
      + primary_dfs_endpoint               = (known after apply)
      + primary_dfs_host                   = (known after apply)
      + primary_dfs_internet_endpoint      = (known after apply)
      + primary_dfs_internet_host          = (known after apply)
      + primary_dfs_microsoft_endpoint     = (known after apply)
      + primary_dfs_microsoft_host         = (known after apply)
      + primary_file_endpoint              = (known after apply)
      + primary_file_host                  = (known after apply)
      + primary_file_internet_endpoint     = (known after apply)
      + primary_file_internet_host         = (known after apply)
      + primary_file_microsoft_endpoint    = (known after apply)
      + primary_file_microsoft_host        = (known after apply)
      + primary_location                   = (known after apply)
      + primary_queue_endpoint             = (known after apply)
      + primary_queue_host                 = (known after apply)
      + primary_queue_microsoft_endpoint   = (known after apply)
      + primary_queue_microsoft_host       = (known after apply)
      + primary_table_endpoint             = (known after apply)
      + primary_table_host                 = (known after apply)
      + primary_table_microsoft_endpoint   = (known after apply)
      + primary_table_microsoft_host       = (known after apply)
      + primary_web_endpoint               = (known after apply)
      + primary_web_host                   = (known after apply)
      + primary_web_internet_endpoint      = (known after apply)
      + primary_web_internet_host          = (known after apply)
      + primary_web_microsoft_endpoint     = (known after apply)
      + primary_web_microsoft_host         = (known after apply)
      + public_network_access_enabled      = true
      + queue_encryption_key_type          = "Service"
      + resource_group_name                = "rg-uks-storage"
      + secondary_access_key               = (sensitive value)
      + secondary_blob_connection_string   = (sensitive value)
      + secondary_blob_endpoint            = (known after apply)
      + secondary_blob_host                = (known after apply)
      + secondary_blob_internet_endpoint   = (known after apply)
      + secondary_blob_internet_host       = (known after apply)
      + secondary_blob_microsoft_endpoint  = (known after apply)
      + secondary_blob_microsoft_host      = (known after apply)
      + secondary_connection_string        = (sensitive value)
      + secondary_dfs_endpoint             = (known after apply)
      + secondary_dfs_host                 = (known after apply)
      + secondary_dfs_internet_endpoint    = (known after apply)
      + secondary_dfs_internet_host        = (known after apply)
      + secondary_dfs_microsoft_endpoint   = (known after apply)
      + secondary_dfs_microsoft_host       = (known after apply)
      + secondary_file_endpoint            = (known after apply)
      + secondary_file_host                = (known after apply)
      + secondary_file_internet_endpoint   = (known after apply)
      + secondary_file_internet_host       = (known after apply)
      + secondary_file_microsoft_endpoint  = (known after apply)
      + secondary_file_microsoft_host      = (known after apply)
      + secondary_location                 = (known after apply)
      + secondary_queue_endpoint           = (known after apply)
      + secondary_queue_host               = (known after apply)
      + secondary_queue_microsoft_endpoint = (known after apply)
      + secondary_queue_microsoft_host     = (known after apply)
      + secondary_table_endpoint           = (known after apply)
      + secondary_table_host               = (known after apply)
      + secondary_table_microsoft_endpoint = (known after apply)
      + secondary_table_microsoft_host     = (known after apply)
      + secondary_web_endpoint             = (known after apply)
      + secondary_web_host                 = (known after apply)
      + secondary_web_internet_endpoint    = (known after apply)
      + secondary_web_internet_host        = (known after apply)
      + secondary_web_microsoft_endpoint   = (known after apply)
      + secondary_web_microsoft_host       = (known after apply)
      + sftp_enabled                       = false
      + shared_access_key_enabled          = true
      + table_encryption_key_type          = "Service"
    }

  # azurerm_subnet.compute will be created
  + resource "azurerm_subnet" "compute" {
      + address_prefixes                               = [
          + "10.0.1.0/28",
        ]
      + default_outbound_access_enabled                = true
      + enforce_private_link_endpoint_network_policies = (known after apply)
      + enforce_private_link_service_network_policies  = (known after apply)
      + id                                             = (known after apply)
      + name                                           = "snet-uks-compute"
      + private_endpoint_network_policies              = (known after apply)
      + private_endpoint_network_policies_enabled      = (known after apply)
      + private_link_service_network_policies_enabled  = (known after apply)
      + resource_group_name                            = "rg-uks-networking"
      + virtual_network_name                           = "vnet-uks-main"
    }

  # azurerm_subnet.firewall will be created
  + resource "azurerm_subnet" "firewall" {
      + address_prefixes                               = [
          + "10.0.5.0/26",
        ]
      + default_outbound_access_enabled                = true
      + enforce_private_link_endpoint_network_policies = (known after apply)
      + enforce_private_link_service_network_policies  = (known after apply)
      + id                                             = (known after apply)
      + name                                           = "AzureFirewallSubnet"
      + private_endpoint_network_policies              = (known after apply)
      + private_endpoint_network_policies_enabled      = (known after apply)
      + private_link_service_network_policies_enabled  = (known after apply)
      + resource_group_name                            = "rg-uks-networking"
      + virtual_network_name                           = "vnet-uks-main"
    }

  # azurerm_subnet.networking will be created
  + resource "azurerm_subnet" "networking" {
      + address_prefixes                               = [
          + "10.0.3.0/28",
        ]
      + default_outbound_access_enabled                = true
      + enforce_private_link_endpoint_network_policies = (known after apply)
      + enforce_private_link_service_network_policies  = (known after apply)
      + id                                             = (known after apply)
      + name                                           = "snet-uks-network"
      + private_endpoint_network_policies              = (known after apply)
      + private_endpoint_network_policies_enabled      = (known after apply)
      + private_link_service_network_policies_enabled  = (known after apply)
      + resource_group_name                            = "rg-uks-networking"
      + virtual_network_name                           = "vnet-uks-main"
    }

  # azurerm_subnet.security will be created
  + resource "azurerm_subnet" "security" {
      + address_prefixes                               = [
          + "10.0.4.0/28",
        ]
      + default_outbound_access_enabled                = true
      + enforce_private_link_endpoint_network_policies = (known after apply)
      + enforce_private_link_service_network_policies  = (known after apply)
      + id                                             = (known after apply)
      + name                                           = "snet-uks-security"
      + private_endpoint_network_policies              = (known after apply)
      + private_endpoint_network_policies_enabled      = (known after apply)
      + private_link_service_network_policies_enabled  = (known after apply)
      + resource_group_name                            = "rg-uks-networking"
      + virtual_network_name                           = "vnet-uks-main"
    }

  # azurerm_subnet.storage will be created
  + resource "azurerm_subnet" "storage" {
      + address_prefixes                               = [
          + "10.0.2.0/28",
        ]
      + default_outbound_access_enabled                = true
      + enforce_private_link_endpoint_network_policies = (known after apply)
      + enforce_private_link_service_network_policies  = (known after apply)
      + id                                             = (known after apply)
      + name                                           = "snet-uks-storage"
      + private_endpoint_network_policies              = (known after apply)
      + private_endpoint_network_policies_enabled      = (known after apply)
      + private_link_service_network_policies_enabled  = (known after apply)
      + resource_group_name                            = "rg-uks-networking"
      + virtual_network_name                           = "vnet-uks-main"
    }

  # azurerm_virtual_network.vnet will be created
  + resource "azurerm_virtual_network" "vnet" {
      + address_space       = [
          + "10.0.0.0/19",
        ]
      + dns_servers         = (known after apply)
      + guid                = (known after apply)
      + id                  = (known after apply)
      + location            = "uksouth"
      + name                = "vnet-uks-main"
      + resource_group_name = "rg-uks-networking"
      + subnet              = (known after apply)

      + ddos_protection_plan {
          + enable = true
          + id     = (known after apply)
        }
    }

  # azurerm_windows_virtual_machine.win_vm_1 will be created
  + resource "azurerm_windows_virtual_machine" "win_vm_1" {
      + admin_password                                         = (sensitive value)
      + admin_username                                         = "adminuser"
      + allow_extension_operations                             = true
      + bypass_platform_safety_checks_on_user_schedule_enabled = false
      + computer_name                                          = (known after apply)
      + disk_controller_type                                   = (known after apply)
      + enable_automatic_updates                               = true
      + extensions_time_budget                                 = "PT1H30M"
      + hotpatching_enabled                                    = false
      + id                                                     = (known after apply)
      + location                                               = "uksouth"
      + max_bid_price                                          = -1
      + name                                                   = "vm-uks-tst-vm-1"
      + network_interface_ids                                  = (known after apply)
      + patch_assessment_mode                                  = "ImageDefault"
      + patch_mode                                             = "AutomaticByOS"
      + platform_fault_domain                                  = -1
      + priority                                               = "Regular"
      + private_ip_address                                     = (known after apply)
      + private_ip_addresses                                   = (known after apply)
      + provision_vm_agent                                     = true
      + public_ip_address                                      = (known after apply)
      + public_ip_addresses                                    = (known after apply)
      + resource_group_name                                    = "rg-uks-compute"
      + size                                                   = "Standard_B2s"
      + virtual_machine_id                                     = (known after apply)
      + vm_agent_platform_updates_enabled                      = false

      + boot_diagnostics {
          + storage_account_uri = (known after apply)
        }

      + os_disk {
          + caching                   = "ReadWrite"
          + disk_size_gb              = (known after apply)
          + name                      = (known after apply)
          + storage_account_type      = "Standard_LRS"
          + write_accelerator_enabled = false
        }

      + source_image_reference {
          + offer     = "WindowsServer"
          + publisher = "MicrosoftWindowsServer"
          + sku       = "2016-Datacenter"
          + version   = "latest"
        }
    }

Plan: 18 to add, 0 to change, 0 to destroy.
azurerm_network_security_group.nsg_1: Creating...
azurerm_network_ddos_protection_plan.ddos_std: Creating...
azurerm_public_ip.firewall_pubip: Creating...
azurerm_firewall_policy.firewall_policy: Creating...
azurerm_monitor_action_group.ag_proj: Creating...
azurerm_monitor_action_group.ag_oncall: Creating...
azurerm_monitor_action_group.ag_itsm: Creating...
azurerm_storage_account.diagnostics: Creating...
azurerm_monitor_action_group.ag_proj: Creation complete after 1s [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-monitoring/providers/Microsoft.Insights/actionGroups/action-group-oncall-mailbox]
azurerm_public_ip.firewall_pubip: Creation complete after 2s [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-networking/providers/Microsoft.Network/publicIPAddresses/pubip-uks-test-firewall-1]
azurerm_network_security_group.nsg_1: Creation complete after 2s [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-networking/providers/Microsoft.Network/networkSecurityGroups/nsg-uks-test-virtualmachine_1-1]
azurerm_monitor_action_group.ag_itsm: Creation complete after 2s [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-monitoring/providers/Microsoft.Insights/actionGroups/action-group-itsm-mailbox]
azurerm_monitor_action_group.ag_oncall: Creation complete after 2s [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-monitoring/providers/Microsoft.Insights/actionGroups/action-group-oncall-mailbox]
azurerm_storage_account.diagnostics: Still creating... [10s elapsed]
azurerm_firewall_policy.firewall_policy: Still creating... [10s elapsed]
azurerm_network_ddos_protection_plan.ddos_std: Still creating... [10s elapsed]
azurerm_network_ddos_protection_plan.ddos_std: Creation complete after 11s [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-security/providers/Microsoft.Network/ddosProtectionPlans/ddos-protection-plan]
azurerm_virtual_network.vnet: Creating...
azurerm_firewall_policy.firewall_policy: Creation complete after 12s [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-networking/providers/Microsoft.Network/firewallPolicies/fw-gbl-test-firewallpolicy]
azurerm_virtual_network.vnet: Creation complete after 4s [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-networking/providers/Microsoft.Network/virtualNetworks/vnet-uks-main]
azurerm_subnet.firewall: Creating...
azurerm_subnet.networking: Creating...
azurerm_subnet.compute: Creating...
azurerm_subnet.security: Creating...
azurerm_subnet.storage: Creating...
azurerm_subnet.storage: Creation complete after 4s [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-networking/providers/Microsoft.Network/virtualNetworks/vnet-uks-main/subnets/snet-uks-storage]
azurerm_storage_account.diagnostics: Still creating... [20s elapsed]
azurerm_storage_account.diagnostics: Creation complete after 21s [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-storage/providers/Microsoft.Storage/storageAccounts/saukstestdiag01]
azurerm_subnet.compute: Creation complete after 8s [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-networking/providers/Microsoft.Network/virtualNetworks/vnet-uks-main/subnets/snet-uks-compute]
azurerm_network_interface.vm_nic: Creating...
azurerm_subnet.security: Still creating... [10s elapsed]
azurerm_subnet.networking: Still creating... [10s elapsed]
azurerm_subnet.firewall: Still creating... [10s elapsed]
azurerm_subnet.networking: Creation complete after 12s [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-networking/providers/Microsoft.Network/virtualNetworks/vnet-uks-main/subnets/snet-uks-network]
azurerm_subnet.firewall: Creation complete after 16s [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-networking/providers/Microsoft.Network/virtualNetworks/vnet-uks-main/subnets/AzureFirewallSubnet]
azurerm_firewall.firewall: Creating...
azurerm_network_interface.vm_nic: Still creating... [10s elapsed]
azurerm_subnet.security: Creation complete after 20s [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-networking/providers/Microsoft.Network/virtualNetworks/vnet-uks-main/subnets/snet-uks-security]
azurerm_firewall.firewall: Still creating... [10s elapsed]
azurerm_network_interface.vm_nic: Still creating... [20s elapsed]
azurerm_network_interface.vm_nic: Creation complete after 23s [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-compute/providers/Microsoft.Network/networkInterfaces/nic-uks-test-virtualmachine_1-1]
azurerm_network_interface_security_group_association.nsg1_vm1: Creating...
azurerm_windows_virtual_machine.win_vm_1: Creating...
azurerm_firewall.firewall: Still creating... [20s elapsed]
azurerm_windows_virtual_machine.win_vm_1: Still creating... [10s elapsed]
azurerm_network_interface_security_group_association.nsg1_vm1: Still creating... [10s elapsed]
azurerm_network_interface_security_group_association.nsg1_vm1: Creation complete after 11s [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-compute/providers/Microsoft.Network/networkInterfaces/nic-uks-test-virtualmachine_1-1|/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-networking/providers/Microsoft.Network/networkSecurityGroups/nsg-uks-test-virtualmachine_1-1]
azurerm_firewall.firewall: Still creating... [30s elapsed]
azurerm_windows_virtual_machine.win_vm_1: Still creating... [20s elapsed]
azurerm_firewall.firewall: Still creating... [40s elapsed]
azurerm_windows_virtual_machine.win_vm_1: Still creating... [30s elapsed]
azurerm_firewall.firewall: Still creating... [50s elapsed]
azurerm_windows_virtual_machine.win_vm_1: Still creating... [40s elapsed]
azurerm_firewall.firewall: Still creating... [1m0s elapsed]
azurerm_windows_virtual_machine.win_vm_1: Still creating... [50s elapsed]
azurerm_firewall.firewall: Still creating... [1m10s elapsed]
azurerm_windows_virtual_machine.win_vm_1: Still creating... [1m0s elapsed]
azurerm_firewall.firewall: Still creating... [1m20s elapsed]
azurerm_windows_virtual_machine.win_vm_1: Still creating... [1m10s elapsed]
azurerm_firewall.firewall: Still creating... [1m30s elapsed]
azurerm_windows_virtual_machine.win_vm_1: Still creating... [1m20s elapsed]
azurerm_firewall.firewall: Still creating... [1m40s elapsed]
azurerm_windows_virtual_machine.win_vm_1: Still creating... [1m30s elapsed]
azurerm_firewall.firewall: Still creating... [1m50s elapsed]
azurerm_windows_virtual_machine.win_vm_1: Still creating... [1m40s elapsed]
azurerm_firewall.firewall: Still creating... [2m0s elapsed]
azurerm_windows_virtual_machine.win_vm_1: Still creating... [1m50s elapsed]
azurerm_firewall.firewall: Still creating... [2m10s elapsed]
azurerm_windows_virtual_machine.win_vm_1: Still creating... [2m0s elapsed]
azurerm_windows_virtual_machine.win_vm_1: Creation complete after 2m3s [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-compute/providers/Microsoft.Compute/virtualMachines/vm-uks-tst-vm-1]
azurerm_firewall.firewall: Still creating... [2m20s elapsed]
azurerm_firewall.firewall: Still creating... [2m30s elapsed]
azurerm_firewall.firewall: Still creating... [2m40s elapsed]
azurerm_firewall.firewall: Still creating... [2m50s elapsed]
azurerm_firewall.firewall: Still creating... [3m0s elapsed]
azurerm_firewall.firewall: Still creating... [3m10s elapsed]
azurerm_firewall.firewall: Still creating... [3m20s elapsed]
azurerm_firewall.firewall: Still creating... [3m30s elapsed]
azurerm_firewall.firewall: Still creating... [3m40s elapsed]
azurerm_firewall.firewall: Still creating... [3m50s elapsed]
azurerm_firewall.firewall: Still creating... [4m0s elapsed]
azurerm_firewall.firewall: Still creating... [4m10s elapsed]
azurerm_firewall.firewall: Still creating... [4m20s elapsed]
azurerm_firewall.firewall: Still creating... [4m30s elapsed]
azurerm_firewall.firewall: Still creating... [4m40s elapsed]
azurerm_firewall.firewall: Still creating... [4m50s elapsed]
azurerm_firewall.firewall: Still creating... [5m0s elapsed]
azurerm_firewall.firewall: Still creating... [5m10s elapsed]
azurerm_firewall.firewall: Still creating... [5m20s elapsed]
azurerm_firewall.firewall: Still creating... [5m30s elapsed]
azurerm_firewall.firewall: Still creating... [5m40s elapsed]
azurerm_firewall.firewall: Still creating... [5m50s elapsed]
azurerm_firewall.firewall: Still creating... [6m0s elapsed]
azurerm_firewall.firewall: Still creating... [6m10s elapsed]
azurerm_firewall.firewall: Still creating... [6m20s elapsed]
azurerm_firewall.firewall: Still creating... [6m30s elapsed]
azurerm_firewall.firewall: Still creating... [6m40s elapsed]
azurerm_firewall.firewall: Still creating... [6m50s elapsed]
azurerm_firewall.firewall: Still creating... [7m0s elapsed]
azurerm_firewall.firewall: Still creating... [7m10s elapsed]
azurerm_firewall.firewall: Still creating... [7m20s elapsed]
azurerm_firewall.firewall: Still creating... [7m30s elapsed]
azurerm_firewall.firewall: Still creating... [7m41s elapsed]
azurerm_firewall.firewall: Still creating... [7m51s elapsed]
azurerm_firewall.firewall: Still creating... [8m1s elapsed]
azurerm_firewall.firewall: Still creating... [8m11s elapsed]
azurerm_firewall.firewall: Creation complete after 8m19s [id=/subscriptions/b055686f-a26e-43f3-971e-f03a89a7979f/resourceGroups/rg-uks-networking/providers/Microsoft.Network/azureFirewalls/fw-gbl-test-firewall]

Apply complete! Resources: 18 added, 0 changed, 0 destroyed.
